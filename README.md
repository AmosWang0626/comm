# im
> instant messaging 鸿雁
> - Netty Gradle Docker

## build docker image
- gradlew build docker
- docker run -d -p 8080:8080 --name im im

## 通信知识
- TCP 三次握手
    - 客户端 第一次：喂，你好，能听到吗？
    - 服务器 第二次：你好，能听到的。
        - 表明客户端连接服务端正常
    - 客户端 第三次：好的，Say something！
        - 表明服务端连接客户端正常

- TCP 四次挥手
    - 主动结束放 第一次：断了吧
    - 另一方------ 第二次：等下断
    - 另一方------ 第三次：断了吧
    - 另一方------ 第四次：断了

- 互发心跳
    - 服务器给客户端发送心跳：监测客户端是否下线
    - 客户端给服务器发送心跳：监测网络是否连接正常

## 注
- 序列化是方便通讯传输
- 编码/解码则是方便程序处理

## 简单梳理
- 请求与响应
    - 要想做操作，需要有request和response，对应有唯一的命令
    - 还需要处理request和response的handler
- 协议
    - 协议里规定了魔数、版本号、序列化算法、命令、数据长度、数据域
    - 协议编码：将对象传入编码方法，返回ByteBuf数据
    - 协议解码：讲要ByteBuf数据传入解码方法，返回对象
- 序列化
    - 序列化：对象转byte[]
    - 反序列化：byte[]转对象